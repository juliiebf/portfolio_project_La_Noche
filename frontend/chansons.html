<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chansons - La Noche Karaoké Paris 9ème</title>
  <meta name="description" content="La Noche - Le karaoké premium de Paris dans les caves voûtées de Pigalle." />
  <link rel="stylesheet" href="style.css" />
  <style>
    .chanson-title {
      color: #eddca2;
      font-size: 2.8em;
      font-weight: bold;
      letter-spacing: 1.5px;
      margin-bottom: 0.7rem;
      font-family: 'Segoe UI', 'Arial', sans-serif;
      text-shadow: none !important;
    }
    .chanson-subtitle {
      color: #fff;
      font-size: 1.43em;
      letter-spacing: 1px;
      font-family: 'Segoe UI', 'Arial', sans-serif;
      text-shadow: none !important;
    }
    .playlist-table {
      width: 100%;
      margin: 2rem auto;
      max-width: 720px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 0 20px #141d2d55;
    }
    .playlist-row {
      display: flex;
      align-items: center;
      background: #181818;
      border-bottom: 1px solid #222;
      padding: 1rem 0.5rem;
      min-height: 54px;
    }
    .playlist-header {
      color: #aaddff;
      font-weight: bold;
      background: #222;
      border-bottom: 2px solid #22aaff;
      font-size: 1.02em;
      min-height: 38px;
    }
    .playlist-title {
      flex: 2;
      font-size: 1.08em;
      color: #fff;
      padding-left: 1rem;
      font-weight: 500;
      letter-spacing: 0.01em;
    }
    .playlist-artist {
      flex: 1.3;
      font-size: 1.04em;
      color: #eddca2;
      padding-left: 1rem;
    }
    @media (max-width: 650px) {
      .playlist-title, .playlist-artist { font-size: 1em; }
      .playlist-row { padding: 0.7rem 0.3rem; }
      .playlist-table { margin: 0; }
      .chanson-title { font-size: 2em; }
      .chanson-subtitle { font-size: 1em; }
    }
  </style>
</head>
<body>
  <div class="background"></div>
  <header>
    <div class="top-header">
      <a href="index.html">
        <img src="images/Design sans titre.png" alt="La Noche Karaoke - Bannière" class="logo-main" />
      </a>
      <nav class="main-nav">
        <ul class="nav-links">
          <li><a href="index.html">Accueil</a></li>
          <li><a href="reservation.html">Réservation</a></li>
          <li><a href="boissons.html">Boissons</a></li>
          <li><a href="chansons.html" class="active">Chansons</a></li>
          <li><a href="galerie.html">Galerie</a></li>
          <li><a href="Votes.html">Evenements</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
        <a href="#" id="openModal" class="login-btn" style="background-color: #27a2ef; color: black; padding: 0.5rem 1.2rem; font-weight: 700; border-radius: 25px; border: none; text-decoration: none; cursor: pointer;">Se connecter</a>
      </nav>
    </div>
  </header>
  <main>
    <section class="chanson-header">
      <div class="chanson-title">Chansons</div>
      <div class="chanson-subtitle">Recherche dans notre catalogue de chansons pour ta soirée karaoké !</div>
    </section>
    <section>
      <div class="playlist-table">
        <div class="playlist-row playlist-header">
          <div class="playlist-title">Titre</div>
          <div class="playlist-artist">Artiste</div>
        </div>
        <div class="playlist-row">
          <div class="playlist-title">Melodrama</div>
          <div class="playlist-artist">Disiz & Théodora</div>
        </div>
        <div class="playlist-row">
          <div class="playlist-title">Tant pis pour elle</div>
          <div class="playlist-artist">Charlotte Cardin</div>
        </div>
        <div class="playlist-row">
          <div class="playlist-title">Berghain</div>
          <div class="playlist-artist">Rosalía, Björk & Yves Tumor</div>
        </div>
        <div class="playlist-row">
          <div class="playlist-title">Jump</div>
          <div class="playlist-artist">Blackpink</div>
        </div>
        <div class="playlist-row">
          <div class="playlist-title">Golden</div>
          <div class="playlist-artist">Huntr/x</div>
        </div>
        <div class="playlist-row">
          <div class="playlist-title">Parisienne</div>
          <div class="playlist-artist">Gims & La Mano 1.9</div>
        </div>
        <div class="playlist-row">
          <div class="playlist-title">Soleil Bleu</div>
          <div class="playlist-artist">Bleu Soleil & Luiza</div>
        </div>
        <div class="playlist-row">
          <div class="playlist-title">Mon Bébé</div>
          <div class="playlist-artist">RnBoi</div>
        </div>
        <div class="playlist-row">
          <div class="playlist-title">Un monde à l’autre</div>
          <div class="playlist-artist">GP Explorer, Gims, La Mano 1.9 & SCH</div>
        </div>
        <div class="playlist-row">
          <div class="playlist-title">Ninao</div>
          <div class="playlist-artist">Gims</div>
        </div>
        <!-- Continue la liste jusqu'à 50 selon ta tracklist -->
      </div>
    </section>
  </main>
 <footer style="background-color: #10060611; color: #777777; padding: 1rem 2rem; text-align: center; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
    <p style="margin: 0 0 0.5rem 0;">© 2025 La Noche Karaoké Paris. Tous droits réservés</p>
    <p style="margin: 0 0 1rem 0;">42 Rue des Martyrs, 75009 Paris | 01 42 82 42 82</p>
    <a href="contact.html" style="color: #22aaff; text-decoration: none; font-weight: 600; font-size: 0.9rem; border: 1px solid transparent; padding: 6px 14px; border-radius: 15px; background: rgba(34, 170, 255, 0.1); transition: background 0.3s, border-color 0.3s;">Contactez-nous</a>
  </footer>
 <!-- Pop-up connexion -->
  <div class="modal-bg" id="popupLogin">
    <div class="modal-popup">
      <div class="modal-tabs">
        <button class="tab-btn active" id="tabSignIn" type="button">Déjà inscrit</button>
        <button class="tab-btn" id="tabSignUp" type="button">Nouveau compte</button>
      </div>
      <div id="signInForm">
        <h2 class="modal-title">Connexion</h2>
        <form>
          <label for="username">Nom d'utilisateur</label>
          <input type="text" id="username" name="username" autocomplete="username" required />
          <label for="password">Mot de passe</label>
          <input type="password" id="password" name="password" autocomplete="current-password" required />
          <button type="submit" class="modal-btn-main">SE CONNECTER</button>
        </form>
      </div>
      <div id="signUpForm" style="display:none;">
        <h2 class="modal-title">Nouveau compte</h2>
        <form>
          <label for="newusername">Nom d'utilisateur</label>
          <input type="text" id="newusername" name="newusername" autocomplete="username" required />
          <label for="newemail">Email</label>
          <input type="email" id="newemail" name="newemail" autocomplete="email" required />
          <label for="newpassword">Mot de passe</label>
          <input type="password" id="newpassword" name="newpassword" autocomplete="new-password" required />
          <button type="submit" class="modal-btn-main">CRÉER LE COMPTE</button>
        </form>
      </div>
    </div>
  </div>

  <script>
    // Fonction pour afficher les messages
    function showMessage(message, type = 'success') {
      const messageEl = document.createElement('div');
      messageEl.style.position = 'fixed';
      messageEl.style.top = '20px';
      messageEl.style.left = '50%';
      messageEl.style.transform = 'translateX(-50%)';
      messageEl.style.padding = '15px 25px';
      messageEl.style.borderRadius = '5px';
      messageEl.style.color = 'white';
      messageEl.style.zIndex = '1000';
      messageEl.style.fontWeight = 'bold';
      messageEl.style.transition = 'opacity 0.5s';
      
      if (type === 'success') {
        messageEl.style.backgroundColor = '#4CAF50';
      } else {
        messageEl.style.backgroundColor = '#f44336';
      }
      
      messageEl.textContent = message;
      document.body.appendChild(messageEl);
      
      setTimeout(() => {
        messageEl.style.opacity = '0';
        setTimeout(() => {
          document.body.removeChild(messageEl);
        }, 500);
      }, 3000);
    }

    // Fonction de connexion
    async function login(event) {
      event.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      
      try {
        const response = await fetch('http://localhost:3000/api/auth/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ username, password }),
        });
        
        const data = await response.json();
        
        if (response.ok) {
          localStorage.setItem('token', data.token);
          updateAuthUI();
          document.getElementById('popupLogin').style.display = 'none';
          showMessage('Connexion réussie !');
        } else {
          showMessage(data.error || 'Erreur de connexion', 'error');
        }
      } catch (error) {
        showMessage('Erreur de connexion au serveur', 'error');
      }
    }

    // Fonction d'inscription
    async function register(event) {
      event.preventDefault();
      const username = document.getElementById('newusername').value;
      const email = document.getElementById('newemail').value;
      const password = document.getElementById('newpassword').value;
      
      try {
        const response = await fetch('http://localhost:3000/api/auth/register', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ username, email, password }),
        });
        
        const data = await response.json();
        
        if (response.ok) {
          showMessage('Inscription réussie ! Vous pouvez maintenant vous connecter.');
          // Basculer vers l'onglet de connexion
          document.getElementById('tabSignIn').click();
        } else {
          showMessage(data.error || "Erreur lors de l'inscription", 'error');
        }
      } catch (error) {
        showMessage("Erreur lors de la communication avec le serveur", 'error');
      }
    }

    // Fonction de déconnexion
    function logout() {
      localStorage.removeItem('token');
      updateAuthUI();
      window.location.reload();
    }

    // Mise à jour de l'interface utilisateur en fonction de l'état de connexion
    function updateAuthUI() {
      const token = localStorage.getItem('token');
      const loginBtn = document.getElementById('openModal');
      
      if (token && loginBtn) {
        // Remplacer le bouton de connexion par un bouton de déconnexion
        loginBtn.outerHTML = `
          <a href="#" id="logoutBtn" class="login-btn" style="background-color: #ff4d4d; color: white; padding: 0.5rem 1.2rem; font-weight: 700; border-radius: 25px; border: none; text-decoration: none; cursor: pointer;" onclick="logout(); return false;">
            Déconnexion
          </a>
        `;
      } else if (loginBtn) {
        // Remettre le bouton de connexion si l'utilisateur n'est pas connecté
        loginBtn.outerHTML = '<a href="#" id="openModal" class="login-btn" style="background-color: #27a2ef; color: black; padding: 0.5rem 1.2rem; font-weight: 700; border-radius: 25px; border: none; text-decoration: none; cursor: pointer;">Se connecter</a>';
        // Réattacher les gestionnaires d'événements
        setupEventListeners();
      }
    }

    // Configuration des écouteurs d'événements
    function setupEventListeners() {
      // Gestion de la modale de connexion
      const openModalBtn = document.getElementById("openModal");
      const popupLogin = document.getElementById("popupLogin");
      
      if (openModalBtn) {
        openModalBtn.onclick = function(e) {
          e.preventDefault();
          popupLogin.style.display = "flex";
        };
      }
      
      if (popupLogin) {
        popupLogin.onclick = function(e) {
          if (e.target === this) this.style.display = "none";
        };
      }

      // Gestion des onglets connexion/inscription
      const tabSignIn = document.getElementById("tabSignIn");
      const tabSignUp = document.getElementById("tabSignUp");
      const signInForm = document.getElementById("signInForm");
      const signUpForm = document.getElementById("signUpForm");
      
      if (tabSignIn) {
        tabSignIn.onclick = function() {
          tabSignIn.classList.add("active");
          tabSignUp.classList.remove("active");
          signInForm.style.display = "";
          signUpForm.style.display = "none";
        };
      }
      
      if (tabSignUp) {
        tabSignUp.onclick = function() {
          tabSignUp.classList.add("active");
          tabSignIn.classList.remove("active");
          signInForm.style.display = "none";
          signUpForm.style.display = "";
        };
      }

      // Gestion des formulaires
      const signInFormEl = document.querySelector('#signInForm form');
      const signUpFormEl = document.querySelector('#signUpForm form');
      
      if (signInFormEl) {
        signInFormEl.onsubmit = login;
      }
      
      if (signUpFormEl) {
        signUpFormEl.onsubmit = register;
      }
    }

    // Initialisation au chargement de la page
    document.addEventListener('DOMContentLoaded', function() {
      updateAuthUI();
      setupEventListeners();
    });
  </script>
</body>
</html>

